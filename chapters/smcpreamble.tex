\floatstyle{boxed}
\restylefloat{figure}

\usetikzlibrary{matrix}

\newcommand{\I}{\mathbb{I}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\tF}{\thicktilde{\F}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\RP}{\mathbb{RP}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\RR}{\R^2}
\newcommand{\RRN}{\R^n}
\newcommand{\RNP}{\R_+^n}
\newcommand{\RNPP}{\R_{++}^n}
\newcommand{\C}{\mathbb{C}}
\newcommand{\CP}{\mathbb{CP}}
\newcommand{\D}{\mathbb{D}}
\newcommand{\DD}{\D^2}
\newcommand{\DN}{\D^n}
\newcommand{\HH}{\mathbb{H}}
\newcommand{\HN}{\mathbb{H}^n}
\newcommand{\dd}{\; \mathrm{d}}
\newcommand{\res}{\;\mathrm{res}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\img}{\,\mathrm{im}\,}
\newcommand{\coker}{\,\mathrm{coker}\,}

\newcommand{\gm}{\mathfrak{m}}
\newcommand{\gp}{\mathfrak{p}}
\newcommand{\tensr}{\otimes_R}
\newcommand{\tens}{\otimes}


\newcommand{\ddz}{\;\mathrm{d}z}
\newcommand{\ddx}{\;\mathrm{d}x}
\newcommand{\ddy}{\;\mathrm{d}y}
\newcommand{\ddt}{\;\mathrm{d}t}
\newcommand{\pd}{\partial}
\newcommand{\pdx}{\partial_x}
\newcommand{\pdy}{\partial_y}

\newcommand{\dxdt}{\frac{dx}{dt}}
\newcommand{\dydt}{\frac{dy}{dt}}
\newcommand{\dydx}{\frac{dy}{dx}}

\newcommand{\Ddx}{\frac{d}{dx}}
\newcommand{\Ddt}{\frac{d}{dt}}
\newcommand{\Ddz}{\frac{d}{dz}}

\newcommand{\im}{\mathrm{Im}}
\newcommand{\real}{\mathrm{Re}}
\newcommand{\cl}{\mathrm{cl}}
\newcommand{\CCp}{\CC_p}

\newcommand{\nth}{^{\text{th}}}
\newcommand{\nst}{^{\text{st}}}
\newcommand{\nrd}{^{\text{rd}}}
\newcommand{\inv}{^{\,\text{-}1}}

\newcommand{\smin}{\text{-}}
\newcommand{\smh}{C^{\infty}}

\newcommand{\thicktilde}[1]{\mathbf{\tilde{\text{$#1$}}}}

\newcommand{\tps}{\thicktilde{\psi}}
\newcommand{\tph}{\thicktilde{\varphi}}
\newcommand{\tstph}{\thicktilde{\varphi}^*}
\newcommand{\tsig}{\thicktilde{\sigma}}

\newcommand{\sym}{\textrm{S}_n(\RR)}
%\newcommand{\gen}{\textrm{GL}_n(\RR)}
\newcommand{\gl}[2]{\textrm{GL}_{#1}(#2)}
\newcommand{\glp}[2]{\textrm{GL}_{#1}^+(#2)}
\newcommand{\gln}[2]{\textrm{GL}_{#1}^-(#2)}
\newcommand{\MN}{M^{n\times n}}
\newcommand{\tr}{\textrm{tr}}
\newcommand{\comp}{\,\mathsmaller{\circ}\,}
\newcommand{\into}{\hookrightarrow }
\newcommand{\onto}{\twoheadrightarrow }
\newcommand{\ident}[1]{\textrm{id}_{#1}}

\newcommand{\imp}{\Rightarrow}

\newcommand{\tet}{\Delta^3}
\newcommand{\ttet}{\blacktriangle^3}
\newcommand{\thrc}{\ocircle^3}
\newcommand{\tri}{\Delta^2}
\newcommand{\ttri}{\blacktriangle^2}
\newcommand{\twoc}{\ocircle^2}
\newcommand{\nplex}{\Delta^n}
\newcommand{\tnplex}{\blacktriangle^i}
\newcommand{\ncell}{\ocircle^2}


\theoremstyle{definition}

\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lem}[theorem]{Lemma}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{cor}[theorem]{Corollary}
\newtheorem{defn}[theorem]{Definition}
\newtheorem{rmk}[theorem]{Remark}
\newtheorem{ex}[theorem]{Example}
\numberwithin{theorem}{section}



\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

%\newcommand{\qed}{\nobreak \ifvmode \relax \else
%      \ifdim\lastskip<1.5em \hskip-\lastskip
%      \hskip1.5em plus0em minus0.5em \fi \nobreak
%      \vrule height0.75em width0.5em depth0.25em\fi}
      
\newcommand\restr[2]{\ensuremath{\left.#1\right|_{#2}}}

\makeatletter
\def\Biggn#1{\mathclose{\hbox{$\left#1\vbox to17.5\p@{}\right.\n@space$}}\mathopen{}}
\makeatother

\def\quotient#1#2{%
    \:\raise1ex\hbox{$#1$}\Biggn/\lower1ex\hbox{$#2$}%
}

\newcommand{\Sing}{\textrm{Sing}}
\newcommand{\sone}{S^1}
\newcommand{\stwo}{S^2}
\newcommand{\sthr}{S^3}
\newcommand{\glm}{\texttt{gl}}
\newcommand{\inter}[1]{\mathtt{int}(#1)}
\newcommand{\lk}[1]{\texttt{lk}(#1)}
\newcommand{\rk}[1]{\texttt{rank}(#1)}
\newcommand{\dimn}[1]{\texttt{dim}(#1)}