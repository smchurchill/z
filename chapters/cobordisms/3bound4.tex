\label{sec:3bound4}

To extend the results of the previous section to the case of 3--manifolds bounding 4--manifolds, we consider generic proper smooth maps from closed orientable 3--manifolds into the 2--ball $B^2$.
Such a map is Morse--like in the sense that its singular set is well behaved, it can be studied via the same techniques as in Section \ref{sec:2bound3}, and we may recover a Stein factorization and Stein complex that define a handle decomposition for a bounding 4--manifold.

Throughout this section $M$ is a closed orientable 3--manifold and $f$ is a generic proper smooth map $M\to\BB$.
The image $X=f(s_f)$ forms the space of critical values for $f$ in the plane.
By Sard's theorem, $X$ is a set of closed arcs in the plane.
By genericity of $f$, we can take the set of arcs to intersect only transversely and in such a way that $\BB\setminus X$ is a set of regions $R_0,\dots,R_k,R_\infty$ such that each $R_i$, $i<\infty$ is homeomorphic to $\BB$, $R_\infty$ is homeomorphic to a open annulus, and one of the boundary components of the closure of $R_\infty$ inside of the closure of $\BB$ is exactly $\pd\DD$.

We decompose $X$ into arc crossings and arcs that connect crossings.
The arcs are \emph{codimension 1 critical values} and the crossings are \emph{codimension 2 critical values}.
This induces a structure on $X$ as a 4--valent graph whose vertex set consists of the set of codimension 2 critical values.
The edge set of $X$ then consists of pairs $p,q$ such that $p$ and $q$ corresponds to codimension 2 critical values connected by an arc of codimension 1 critical values in $X$.
For this reason we also call an arc of critical values of $X$ an \emph{edge}, and a codimension 2 critical value of $X$ a \emph{vertex} of $X$.


\begin{figure}
	\centering
	\captionsetup{justification=centering}
	\caption{Closed sleeve around an arc of codimension 1 critical values and the two neighbouring codimension 2 critical values}
	\includegraphics[height=4in]{figures/critsleeve.jpg}
	\label{fig:critsleeve}
\end{figure}

\begin{lem}
	\label{lem:bbdecomp}
	There is a decomposition of $\BB$ induced by $f$ into 2--manifolds with corners all but one of which are homeomorphic to $\DD$.
	These cornered discs intersect one another along intervals embedded in their boundaries, boundary points of these intervals are exactly the disc corners, and the number of corners in this decomposition is exactly 8 times the number of vertices of $X$.
\end{lem}

\begin{proof}
	Refer to Figure \ref{fig:critsleeve} for the general idea.	
	Around each vertex $x$ of $X$ we fit an octagon $\nbhd{x}$ such that the edges of the octagon alternate between transverse intersection and nonintersection with an arc of codimension 1 critical values.
	
	Consider $\BB_*=\overline{\BB\setminus\cup_v \nbhd{x}}$.
	The topological boundary of $\BB_*$ consists of the octagonal boundaries of the $\nbhd{x}$.
	The edges of $X$ connect the boundary components of $\BB_*$, so we may fit neat closed tubular neighbourhoods around the edges in such a way that the corners of this neighbourhood agree with the corners of the $\nbhd{x}$.
	For $\alpha$ and edge of $X$, $\nbhd{\alpha}$ is the sleeve around $\alpha$.
	
	Now, $\BB_{**}=\overline{\BB_*\setminus\cup_\alpha\nbhd{\alpha}}$.
	Each connected component is either a subset of $R_\infty$ or an open octagonal subset of a region $\R_i$.
	We take the topologinal closure of these octagons in $\BB$ and call these spaces by $D_i$.
	
	The union of the topological boundaries of the decomposing blocks form a subspace $Y$ of $\BB$ that intersects $X$ only along edges of $X$.
	By construction, $Y$ has the structure of a 3--valent graph whose vertices are its corners and whose edges are the edges of the decomposing blocks for $B$.
\end{proof}

\begin{lem}
	\label{lem:3bodydecomp}
	There is a decomposition of $M$ induced by $f$ and Lemma \ref{lem:bbdecomp} into distinct subspaces, each of which is a manifold with corners that is homeomorphic to a $(3,1)$--handlebody of genus 0, 1, 2, or 3.
	These cornered handlebodies intersect one another along $(2,1)$--handlebodies embedded in their boundaries and the boundary circles of these embedded $(2,1)$--handlebodies are exactly the corners of the $(3,1)$--handlebodies.
\end{lem}

\begin{proof}
	First consider the vertices of $Y$ obtained in Lemma \ref{lem:bbdecomp}.
	Some of these vertices are outside the image of $f$, so we disregard them entirely.
	The rest are regular points of $f$, so their preimages are disjoint collections of circles in $M$.
	For a vertex $v$ of $Y$, we call the preimage by $M_v$ and index the individual circles by $M_{v,k}$.
	
	Now, the edges of $Y$.
	Again, some edges of $Y$ are outside of $f(M)$, so we disregard them.
	Of the rest, we first consider those that do not intersect $X$.
	These are strands of regular points of $f$, so their preimages are disjoint collections of annuli in $M$ as in Lemma \ref{lem:2bodyannuli2}.
	An edge $e$ of this type is one of the edges bounding an octagon $D_i$ interior to $R_i$, and it does so as the shared boundary of $D_i$ with either an edge sleeve $\nbhd{\alpha}$ of $X$ or a vertex sleeve $\nbhd{x}$ of $X$.
	We call the preimage annuli by $M_{e,1}$ and index the connected components by $M_{e,1}^{k_u,k_v}$, where $u$ and $v$ are the vertices of $Y$ that bound $e$ and $M_{v,k_v}$ and $M_{u,k_u}$ are the boundary circles of the component.
	The term ``1'' in the subscript denotes the genus of the $(2,1)$--handlebody that projects over the edge $e$.
	
	If an edge $e$ of $Y$ intersects an edge $\alpha$ of $X$, then $f\inv(e)$ is the disjoint union of a collection of some number of annuli (possibly zero) with a pair of pants or a disc, as in Lemma \ref{lem:2bodysing}.
	We call the preimage annuli in this collection by $M_{e,1}^{k_u,k_v}$ as before.
	If there is a disc projecting over $e$, it is denoted $M_{e,0}^{k_u}$, and if there is a pair of pants it is $M_{e,2}^{k_u,k_v,k_w}$, where the indexing follows the established pattern.
	
	Pulling back $Y$ to $f\inv(Y)=M_\Sigma$ yields a collection of $(2,1)$--handlebodies of genus 0, 1, and 2 that intersect other handlebodies only along their boundary circles.
	These circles are the union
	\[
		M_\Sigma^c = \bigcup_{v\in v(Y)}\Big( \bigcup_k M_{v,k}\Big),
	\]
	and $M_\Sigma\setminus M_\Sigma^c$ is just the collection of open $(2,1)$--handlebodies that project over the interiors of the edges of $Y$.
	
	We now show that $M\setminus M_\Sigma$ is a disjoint collection of open sets, each of which is homeomorphic to the interior of a $(3,1)$--handlebody of genus 0, 1, or 2.
	
	Let $D$ be a disc in the decomposition of $\BB$.
	For $p$ a point interior to $D$, $p$ is regular.
	We invoke the same arguments made in Lemmas \ref{lem:2bodyannuli1} and \ref{lem:2bodyannuli2}, finding a small tubular neighbourhood about $p$, then taking the union of tubular neighbourhoods to form an open neighbourhood that projects surjectively over $D$.
	This implies that the preimage of $\inter{D}$ is a collection of open solid tori whose topological boundary in $M$ sits inside of $M_\Sigma$ as a collection of disjoint cornered surfaces homeomorphic to tori.
	
	For an arc sleeve $\nbhd{\alpha}$, 
	
	
\end{proof}

\begin{lem}
	\label{lem:3body2handle}
	Let $M$ have the decomposition of Lemma \ref{lem:3bodydecomp}.
	If $M$ is the boundary of some 4--manifold $W$, then 4--dimensional 2--handles can be attached to $W$ over the regular genus 1 handlebodies in the decomposition of $M$ in such a way that the induced surgery on $M$ turns every genus 0, 1, and 2 codimension 1 handlebody into a copy of $S^2\times\D^1$.
\end{lem}

\begin{lem}
	\label{lem:3body3handle}
	Let $M^2$ have the decomposition of Lemma \ref{lem:3bodydecomp} surgered by the 2--handle attachments of Lemma \ref{lem:3body2handle}, and take $M^2$ to be the boundary of some 4--manifold $W^2$.
	Then 4--dimensional 3--handles can be attached to $W^2$ over the copies of $S^2\times\D^1$ in $M^2$ formed in Lemma \ref{lem:3body2handle}, and the surgery on $M^2$ induced by the attachments of this lemma and Lemma \ref{lem:3body2handle} turns every genus 0, 1, 2, and 3 codimension 2 handlebody into a copy of $S^3$.
\end{lem}

\begin{theorem}
	\label{lem:3body4handle}
	\label{thm:3bound4}
	The map $f$ determines entirely a handle decomposition for a cobordism of the pair $(M,\emptyset)$.
\end{theorem}

\begin{proof}
	The preceding lemmas provide a
	
\end{proof}

\begin{theorem}

	Let $M$ be a closed orientable 3--manifold.
	Then a proper generic smooth map $f:M\to \BB$ determines a handle decomposition for a cobordism of the pair $(M,\emptyset)$.
\end{theorem}

\begin{proof}
	By Sard's theorem, the image of the singular set $f(s_f)$ in $\BB$ has Lebesgue measure 0.
	By genericity, and because the maps constructed in Chapter \ref{cha:alg1} satisfy this requirement, we take $s_f$ to consist of a set of arcs in the plane that intersect each other only pairwise and transversally, in such a way that $\BB\setminus s_f$ consists of a collection of regions $R_i$ homeomorphic to copies of $\BB$ along with a single annular region $R_\infty$ that does not intersect $f(M)$, and in such a way that $f(s_f)$ has a natural structure as a simple undirected 4--valent planar graph.
	We classify the critical values of $f$ as codimension 1 inside of arcs away from crossings, and codimension 2 at arc crossings.
	This classification makes the simple undirected planar graph structure of $f(s_f)$ explicit.
	The vertex set is given by the set of codimension 2 critical values and the edge set is the collection of codimension 1 critical values.
	
	We obtain a 4--manifold with boundary $M$ by attaching 2--handles corresponding to the regular regions $R_i$, 3--handles corresponding to codimension 1 singularities, and 4--handles corresponding to codimension 2 singularities.
	
	We will first focus on a region $R$ in $\BB$ that is not $R_\infty$.
	Begin by ``shrinking'' $R$ away from $f(s_f)$ into a space $\D$ that is homeomorphic to $\DD$
	Every point of $\D$ has preimage a disjoint collection of circles by the regular value theorem, so we centre our analysis on an arbitrary regular value $x$ and its regular fibers, where $M_{x,k}$ denotes the $k\nth$ regular fiber mapped over $x$ by $f$.
	An appropriate closed tubular neighbourhood of $M_{x,k}$ will consist entirely of regular fibers that map into $\D$ and has the structure of a closed 2--disc bundle over the circle, hence is a solid torus.
	The neighbourhood can be extended to enclose the entirety of $f\inv(\D)$.
	
	In summary, an arbitrary point $x_i$ is chosen from a closed 2--disc $D_i$ which itself is taken as a shrinking of an open region $R_i$.
	For each $k$, the $k\nth$ regular fiber $M_{i,k}$ over $x_i$ is taken as the zero section of a 2--disc bundle that maps over $D_i$.
	Such a bundle is an open solid torus, and the $k\nth$ bundle is denoted $V_{i,k}$.
	Of particular importance in $V_{i,k}$ are the zero section and a certain isotopy class of longitudes.
	The zero section $z(V_{i,k})$ is a regular fiber that maps over a point interior to $\D_i$, and the longitudinal isotopy class is the one that contains regular fibers that map to single boundary points of $D_i$.
	This pair determines an attaching map for 4--dimensional 2--handle attached over $V_{i,k}$.
	

	
	Consider an arc $\alpha$ of codimension 1 critical values that separates a pair of regions $R_i$ and $R_j$ where either $i$ or $j$ may be $\infty$.
	As when we considered regions, $\alpha$ has been shrunk away from the codimension 2 critical values it connects.
	Let $\nbhd{\alpha}$ be a closed ``sleeve'' around $\alpha$ whose boundary intersects the boundaries of $D_i$ and $D_j$ as in Figure \ref{fig:critsleeve}.
	The restriction of $f$ to the preimage of a linear transversal to $\alpha$ that connects $D_i$ and $D_j$ is, itself, a Morse function.
	The intersection with $\alpha$ is a critical point of this restriction, and the same techniques from the proof of Theorem \ref{thm:2bound3} may be applied to $f\inv(\nbhd{\alpha})$.
	A strand of singular fibers over $\alpha$ consists of an interval in the case of an extremum for the associated Morse function or an interval crossed with the figure 8 when the associated Morse function yields a saddle singularity.
	The critical neighbourhood $f\inv(\nbhd{\alpha})$ contains a connected component that is either $\DD\times\I$ when we have cross sectional extremum, or $P\times\I$, where $P$ is the pair of pants surface, i.e.\ the 2--sphere with three interior 2--balls removed, when the cross section yields a saddle.
	All remaining connected components are intervals crossed with regular annuli.
	We use $A=S^1\times\D^1$, alternatively the 2--sphere with two interior 2--balls removed, to denote an annulus, and find $A\times\I$ to be the form of all remaining connected components.
	
	Whenever one of the regions that $\alpha$ separates is $R_\infty$, the cross section necessarily gives us an extremum, and the critical neighbourhood over $\nbhd{\alpha}$ is $\DD\times\I$.
	We call $\alpha$ a \emph{definite fold} when the critical neighbourhood is $\DD\times\I$, and an \emph{indefinite fold} when the critical neighbourhood is $P\times\I$.
	
	Let $x$ be a codimension 2 critical value and $\nbhd{x}$ the closed neighbourhoods whose boundary agrees with the shrunken regions and arc sleeves it is near as in Figure \ref{fig:critsleeve}.
	The possible singular fibers over $x$ are cataloged in \cite{Saeki}, and Figure \ref{fig:saekising} displays them.
	The singular fibers over $x$ may be disconnected.
	When that is the case, the fibers have the form seen in our codimension 1 analysis.
	Otherwise, the singular fiber has the shape of a 4--valent directed graph.
	The regular fibers are still copies of $S^1$.
	In each case $f\inv(\nbhd{x})$ is a 3--dimensional thickening of the corresponding fibers, hence is a disjoint collection of handlebodies of genus 0,1,2, or 3.
	The neighbourhood of a regular fiber is still a solid torus, so all but at most two of the connected components of $f\inv(\nbhd{x})$ will be genus 1 handlebodies.
	
	\begin{figure}
		\centering
		\captionsetup{justification=centering}
		\caption{Possible singular fibers of a proper generic smooth map from an orientable 3--manifold to a surface}
		\includegraphics[height=3in]{figures/saekising.jpg}
		\label{fig:saekising}
	\end{figure}
	
	We may now begin describing a handle decomposition for a cobordism $W$ of the pair $(M,\emptyset)$.
	Begin with $M\times\I$, whose boundary is $M_0\sqcup M_1$ with $M_0=M\times\{0\}$ and $M_1 = M\times\{1\}$, and a proper generic smooth map $f:M_0\to\BB$.

	For each $i<\infty$ indexing the connected regions of $\BB\setminus f(s_f)$, we index over $k$ the connected components of $f\inv(R_i)$.
	Consider $D_i\subset R_i$, a 2--disc of regular values, and $V_{i,k}$, the $k\nth$ regular solid torus that maps over $D_i$.
	The solid torus $V_{i,k}$ has a trivial disc bundle structure over the regular fiber $M_{i,k}=z(V_{i,k})$, and $f(M_{i,k})=x$ in the interior of $\D_i$.
	Because we consider a single solid torus for the rest of this argument, we abbreviate $V_{i,k}$ to $V$, $M_{i,k}$ to $z(V)$ and $\D_i$ to $\D$.

	Let's remember what we're doing here --- we're attaching handles in such a way that, once all handles have been attached, the boundary component $M_0$ of $M\times\I$ has been filled in.
	In this step we attach 2--handles over $V$.
	Our goal is to do so in such a way that we remove the ``bad'' solid torus $V$ and replace it with a solid torus that is ``nice,'' where ``nice'' means that the newly introduced solid torus can be filled in by attaching 3-- and 4--handles.
	This happens by deleting $V$ and gluing 2--discs to the longitudes in $\pd V$ that are regular fibers of points in the boundary of $D$.
	To attach a 2--handle over $V$, we need
	\begin{enumerate}
		\item The isotopy class of an embedding $g:S^1\to M_0$, and
		\item the isotopy class of an identification $G:S^1\times\DD\to\nbhd{g(S^1)}$.
	\end{enumerate}
	The embedding $S^1\to M_0$ is easy enough to define as we will just be identifying $S^1$ with $z(V)$.
	This $S^1$ lives as the attaching sphere $S^1\times\{0\}$ inside of the 2--handle $\DD\times\DD$ that we plan to attach.
	Taking $\pd (\DD\times\DD)=(S^1\times\DD)\cup(\DD\times S^1)$ to be the genus 1 Heegard splitting of $S^3$, we will be defining a map $G:V\to S^1\times\DD$, where $S^1\times\DD$ is the first torus component.
	We call the other torus $V^*$.
	In order to satisfy our desired criteria, we need to have $G$ be in the isotopy class of a map that takes a regular fiber $J$ over a point in the boundary of $\D$ to $S^1\times\{1\}$.
	When this is true, we may form the adjunction $(M\times\I)\cup_{G\inv}(\DD\times\DD)$ and $J$ bounds a disc in $V^*$.
	Every fiber in the interior of $V$ now bounds a disc, and the new boundary is exactly $V^*$, whose meridians are the fibers that project over the boundary of $\D$.
	This is the property we wanted --- we've replaced the ``bad'' solid torus $V$ with the ``nice'' solid torus $V^*$.
	
	\begin{figure}
		\centering
		\captionsetup{justification=centering}
		\caption{The solid tori $V$ and $V^*$ with boundary curves $J$, $K$, and $L$.}
		\includegraphics[width=6in]{figures/VV.jpg}
		\label{fig:VV*}
	\end{figure}
	
	A class $[G]$ satisfying the above is unique and it exists.
	To see why, let $\varphi:V\to S^1\times\DD$ be any trivialization of $V$, take $K=\varphi\inv(\{1\}\times S^1)$ to represent the meridinal isotopy class of $V$, and take $L$ be the longitude in $\pd V$ defined by $L=\varphi\inv(S^1\times\{1\})$.
	Let $J=f\inv(q)$ in $\pd V$ represent the isotopy class of regular fibers over boundary points of $\D$, where $q$ is an arbitrary point in the boundary of $D$.	
	Figure \ref{fig:VV*} shows the curves $J$, $K$, and $L$ with orientations sitting on $\varphi(V)$.
	Thinking of $S^1\times\DD$ as a subset of $\C^2$ gives it a natural orientation, which we have pulled back through $\varphi$ onto $K$ and $L$.
	We give $J$ a compatible orientation so that its intersections with $K$ and $L$ can be counted.
	Put $\kappa$ to be the oriented intersection number of $J$ and $L$.
	Then $\varphi(J)\in \pd\varphi(V)$ is in the isotopy class of $h_M^{\kappa}(\varphi(L))$, where $h_M$ is the meridinal twist defined in Theorem \ref{thm:mpgV}.
	Take $G=H_M^{-\kappa}\comp\varphi$, where $H_M$ is the extension of $h_M$ to the solid torus defined in Remark \ref{rmk:2handle}.
	In the boundary of $G(V)$, $G(J)$ is in the isotopy class of $S^1\times\{1\}$, $G(K)$ is in the isotopy class of $\{1\}\times S^1$, and $G(L)=h_M^\kappa(S^1\times\{1\})$.
	Existence of $G$ is shown, and uniqueness up to isotopy comes from the same uniqueness in trivializations of $V$ and of $H_M$.
		
	With 2--handles attached, we move onto the preimages of arc sleeves.
	Let $\nbhd{\alpha}$ be an arc sleeve, and consider the connected components of $f\inv(\nbhd{\alpha})$.
	Figure \ref{fig:arcsleevepre} displays the possible connected components of arc sleeve preimages, each of which has the form of a surface crossed with the interval.
	The boundary circles of these surfaces at a cross section $\Sigma\times\{t\}$ project through $f$ over the boundaries of shrunken regions, so they are filled with discs that sit inside of attached 2--handles from the previous step.
	In each case, we obtain a copy of $S^2\times\D^1$ over which we attach a 3--handle.
	The further modification to $M_0$ that takes place when we attach 3--handles can be thought of as the deletion of a copy of $S^2\times D^1$ followed by gluing 3--discs over the newly created 2--sphere boundary components.
	
	\begin{figure}
		\centering
		\captionsetup{justification=centering}
		\caption{Possible connected components of arc sleeve preimages}
		\includegraphics[height=4in]{figures/arcsleevepre.jpg}
		\label{fig:arcsleevepre}
	\end{figure}
	
	Finally, let $x$ be a codimension 2 critical value and let $\nbhd{x}$ be its sleeve.
	We find $x$ at the crossing of a pair of strands of codimension 1 critical values, and those strands are classified as definite or indefinite folds.
	The analysis of the codimension 2 critical value is then broken down into five cases.
	In four cases, we are able to extend the codimension 1 situation.
	This happens when the singular fiber is disconnected, called an \emph{uninteractive} singular fiber, or when one of crossing folds is definite.
	When both folds are indefinite and the singular fiber is connected, then the singular fiber is called \emph{interactive} and we defer to the analysis in \cite{CostThur08}.
	
	First we look at the connected components of $f\inv(\nbhd{x})$ that do not contain a singular fiber over $x$.
	These connected components are made from regular fibers, i.e.\ circles, that project over $\nbhd{x}$, i.e. a 2--disc.
	As in the case of regions of regular values, they are solid tori $V_{x,k}$, using the same naming convention that has been established for solid tori that map over the regions $D_i$.
	Seeing $V_{x,k}$ as a 2--disc bundle over $f\inv(x)$, we can find an isotopy class of longitudes that project over single points in the boundary $\pd\nbhd{x}$.
	These longitudes bound discs introduced during 2-- and 3--handle attachment.
	The union of all such discs yields a solid torus $V_{x,k}^*$ in the boundary.
	The boundary component consisting of $V_{x,k}$ and $V_{x,k}^*$ is described by the Heegaard splitting $V_{x,k}\cup_\varphi V_{x,k}^*$ where $\varphi$ takes a longitude of $V_{x,k}$ to a meridian of $V_{x,k}^*$.
	This is the standard genus 1 Heegaard splitting of $S^3$, so we have a copy of $S^3\times\D^0$ over which we may attach a 4--handle.

	The component that comes from an uninteractive definite fold is of the form $\DD\times\I$ as in the case of codimension 1 critical values.
	The 2--sphere boundary of this shape is filled with 2--discs from our 2-- and 3--handles, so this shape is the adjunction of a pair of 3--discs glued over their boundary.
	This is the genus 0 Heegaard splitting of $S^3$, so we have a copy of $S^3\times\D^0$ over which we may attach a 4--handle.
		
	\begin{figure}
		\centering
		\caption{Destabilizing pairs for the pair of pants}
		\includegraphics[height=3in]{figures/destabpants.jpg}
		\label{fig:destabpants}
	\end{figure}
		
	An uninteractive singular fiber that comes from an indefinite fold is the figure 8, and the preimage $f\inv(\nbhd{x})$ is a closed tubular neighbourhood of the figure 8 graph, which is homeomorphic to the pair of pants crossed with an interval.
	Here, we find a Heegaard splitting of genus 2 with two destabilizing pairs, showing that the splitting is a splitting of $S^3$, and we can attach a 4--handle to it by Theorem \ref{thm:lilwald}.
	An appropriate choice of meridians in $f\inv(\nbhd{x})$ would be a pair of curves that run from cuff to waist along the inside of each of the legs in the pair of pants, crest the waist, then down the outside of the legs back to the cuff.
	Meridians for the solid filled by our 2-- and 3--handles would run around the cuffs of each leg.
	Figure \ref{fig:destabpants} illustrates the idea.
	
	When an indefinite and definite fold interact, we get the same shapes found in the case of an uninteractive definite fold.
	From a 1--dimensional Morse function viewpoint, we witness a homotopy of a pair of peaks separated by a saddle come together into a single peak, eliminating the saddle.
		
	This leaves us with the case of interacting indefinite folds.
	The full analysis is covered in Section 4.4 of \cite{CostThur08}.
	They show that filling in $f\inv(\pd\,\nbhd{x})$ with 2--discs and gluing the two genus 3 handlebodies together over $f\inv(\pd\,\nbhd{x})$ results in a Heegard splitting of $S^3$ by explicitly finding 3 destabilizing pairs.
	We attach 4--handles over these 3--spheres.
	Attaching a 4--handle over a 3--sphere fills in the 3--sphere with a 4--disc, so these final modifications completely eliminate what is left of $M_0$.
	We are left with a handle decomposition for a cobordism of the pair $(M,\emptyset)$ built on top of $M_0$ in $M\times\I$.
\end{proof}

Let $f:M:\to\BB$ be a proper generic smooth function and $W$ a the cobordism of the pair $(M,\emptyset)$, both as per the construction in Theorem \ref{thm:3bound4}. 
Because the handle decomposition produced for $W$ consists of handles of index 2,3, and 4, the associated dual decomposition contains handles of degree 0,1, and 2.
Our goal is to obtain a combinatorial description of this decomposition, and we find this through the Stein complex.

Recall that the Stein complex for a Morse function on a surface was given by a 1--complex.
In the case of a proper generic smooth map $M\to\BB$, the Stein complex is given by a 2--complex $S$.
The vertices of $S$ correspond to 0--handles, the edges to 1--handles and the 2--cells to 2--handles.

We define the Stein factorization and complex of $f$ as usual.
Let $\sim$ be an equivalence relation on $M$ defined by $p\sim q$ if and only if $f(p)=f(q)=x$ and $p$, $q$ are in the same connected component of $f\inv(x)$.
Then $f=g\comp h$ where $h$ is the quotient map $M\to M/\!\!\sim$ and $g$ takes a point in $f\inv(x)$ to $x$.

\begin{theorem}
	\label{thm:stein2complex}
	Let $f$, $M$, $S$, and $W$ be as we defined above.
	Then $S$ is a 2--dimensional CW--complex that embeds flatly in $W$.
\end{theorem}

\begin{proof}
	There are only a few locations where $S$ could fail to be a CW--complex, and those are found over the critical values of $f$.
	We construct $S$ as we would any other CW--complex, by iteratively attaching cells of increasing dimension, and define a map $\varphi:S\into W$ that is almost a flat embedding in a similar fashion.
	Let $S$ be empty and begin by adding 0--cells to $S$.
	
	For a codimension 2 singular value $x$ of $f$, the fibers of over $x$ were discussed in Theorem \ref{thm:3bound4}.
	The Stein factorization $f=g\comp h$ has $h$ crush each fiber to a point, which we take as a new 0--cell in $S$.
	Let $\nbhd{x}$ be a sleeve of $x$ as in Theorem \ref{thm:3bound4}.
	In the construction of $W$, we attached 4--handles over 3--spheres with Heegaard decompositions over $f\inv(\nbhd{x})$.
	The cocore of a 4--handle is a single point, so we associate the 0--cells of $S$ with the cocores of 4--handles in $W$.
	Let $x_i$ be a fiber over $x$, let $H_i^4\subset W$ be the 4--handle associated to $x_i$, let $c_i\in H_i^4$ be the cocore of $H_i^4$, and let $v_i$ be the vertex of $S$ associated to $x_i$.
	Define $\varphi(v_i)=c_i$.
	
	We can now add edges to $S$.
	Let $\alpha$ be an open strand of codimension 1 critical points of $f$ with $\pd\overline\alpha=\{x,y\}$, a pair of codimension 2 critical points of $f$.
	Pulling back $\alpha$ to $M$ yields an open interval crossed with the fibers over any point of $\alpha$ and pulling back $\overline\alpha$ connects the fibers over $x$ and $y$.
	For a fiber $\alpha_i$ over $\alpha$ with endpoints $\alpha_i^x$ sitting inside of a fiber over $x$ and $\alpha_i^y$ sitting in a fiber over $y$, we add an edge attached over the vertices $v_i^x$ and $v_i^y$ associated to the fibers over $x$ and $y$.
	This corresponds to the action of $h$ on $\alpha_i$, which crushes the interval of fibers to an interval.
	
	Let $\nbhd{\alpha}$ be a sleeve of $\alpha$ as in Theorem \ref{thm:3bound4}.
	To construct $W$ we attached 3--handles over copies of $S^2\times\D^1$, those $S^2\times\D^1$ contained copies of $\Sigma\times\D^1$ with $\Sigma$ the 2--sphere with one, two, or three open 2--balls removed, and those $\Sigma\times\D^1$ projected over $\nbhd{\alpha}$.
	The cocore of a 3--handle is a copy of $\D^1$, which corresponds to an edge in $S$.
	Let $\alpha_i$ be a fiber over $\alpha$, $H_i^3$ the 3--handle associated with $\alpha_i$, $c_i$ the interval cocore of $H_i^3$, and $e_i$ the edge of $S$ corresponding to $\alpha_i$ with $\pd e_i=\{u,v\}$.
	Because $e_i$ is a 1--cell, it is homeomorphic to an interval $[\,0,1\,]$, so we take a slightly smaller closed subinterval $e_i'$ in $e_i$ (just as we can take $[\,\varepsilon,1-\varepsilon\,]$ inside of $[\,0,1\,]$) and define $\varphi(e_i')=c_i$.
	The endpoints of $c_i$ are the belt sphere of $H_i^3$, and they intersect the 4--handles $H_u^4$ and $H_v^4$ corresponding to $u$ and $v$.
	The intersection points are in the boundary 3--spheres of these 4--handles, so there are straight lines inside of the 4--handle that connect the cocore to these boundary points.
	Define $\varphi$ on $e_i\setminus e_i'$ to be those straight line segments in the appropriate continuous way.
	
	And finally, the 2--cells.
	Let $R$ be an open ball of regular values in the plane, and let $D$ be the 2--disc inside of $R$ that pulls back through $f$ to a disjoint collection of solid tori over which we attached 2--handles in our construction of $W$.
	Let $H$ be the 2--handle attached over a solid torus $V$ projecting over $D$.
	The boundary of $H^2$ is a 3--sphere with genus 1 Heegaard splitting consisting of $V$ and a dual torus $V^*$.
	We attached $H^2$ because we wanted to fill the boundary of $V$ with 2--discs that were easy to attach 4-- and 3--handles over, and $V^*$ is also contained in the union of these 4-- and 3--handles.
	The vertices and edges of $S$ corresponding to this collection 4-- and 3--handles forms a cycle $C$ in the 1---skeleton of the Stein complex already built.
	We know that $R$ contains only regular values, so it pulls back to a disjoint collection of open solid tori.
	Let $U$ be the open solid torus in this collection with $f(U)=R$ and $V\subset U$.
	In particular, $\pd V=\pd V^*\subset U$.
	The fibers of $S$ are fibers of $f$ that project over the regular values in $R$, so $h(U)$ is a 2--ball.
	The closure of $U$ intersects the singular fibers corresponding to the 4-- and 3--handles that contain $V^*$.
	We take $h(U)$ in $S$ to be a 2--cell attached over $C$.

	To define $\varphi$ on the 2--cell $\sigma_U$ corresponding to $U$, we start by defining it on $\sigma_V$, a subdisc of $\sigma_U$ (cf.\ the case of defining $\varphi$ on the edges of $S$, where $\sigma_V\subset\sigma_U$ just like how $\{z\in\C:|z|^2\leq 1-\varepsilon\}\subset\DD$).
	Recall that	$H^2$ is the 2--handle attached over $V$.
	It is useful to think of $H^2$ as a $\DD$ bundle over $\DD$, where the base space and zero section are the cocore $C_V$ of $H^2$.
	We define $\varphi(\sigma_V)=C_V$, and then examine the intersection of $C_V$ with the 4-- and 3--handles of $W$.
	The collection of higher index handles that intersect $H^2$ is exactly the collection that contains $V^*$, and the intersection is exactly $V^*$.
	The cocore $C_V$ intersects $V^*$ in exactly the belt sphere of $H^2$.
	We then extend $\varphi$ to $\sigma_U\setminus\sigma_V$ exactly as we did with the edges of $S$, by connecting the belt sphere of $H^2$ with the cocores of the 4-- and 3--handles by line segments.
	
	This demonstrates first that the Stein complex $S=h(M)$ has the structure of a 2--complex.
	Secondly, the map $\varphi:S\into W$ constructed here is piecewise--linear where it is not smooth, so can be smoothed into a flat embedding of a CW--complex.											
\end{proof}

In Section \ref{sec:proj} it is convenient to remove open balls from a given 3--manifold $M$ and build a projection of $M'$ instead.
We want the results of this section to still apply, so we state this in Theorem \ref{lem:stillworks}

\begin{lem}
	\label{lem:stillworks}
	Let $M$ be a closed orientable 3--manifold, and let $M'$ be $M$ with a finite number of disjoint 3--balls removed.
	Call the disjoint 2--sphere boundary components of $M'$ by $\pd_i M'$.
	Let $f:M'\to\DD$ be a proper generic smooth map such that $f(\pd M')$ is a disjoint collection of intervals in the boundary of $\DD$ and the image of the singular set of $f$ away from $\pd M'$ is as described in the proof of Theorem \ref{thm:3bound4}.
	Then the Stein complex recovered for $f$ in the manner of Theorem \ref{thm:stein2complex} is exactly the Stein complex recovered for an extension of $f$ to $M$.
\end{lem}

\begin{proof}
	The singular fibers near $f(\pd M')$ are all definite folds, and extending $f$ to 3-balls attached over the boundary components of $M'$ yields an extension of that definite fold over the image of the 3--ball.
\end{proof}

All that's left is to realize the Stein complex as a set of instructions to build a handle decomposition of $W$, dual to the one obtained in Theorem \ref{thm:3bound4}, that relies only on $f$ and $S$.
We state this more precisely in Theorem \ref{thm:3stein4}.

\begin{theorem}
	\label{thm:3stein4}
	Let $f$, $M$, $S$, $W$ be as defined above.
	Then there exists a 4--manifold $W^*$ that is a cobordism of the pair $(M,\emptyset)$ in which $S$ embeds flatly as in Theorem \ref{thm:stein2complex}, and this manifold may be reconstructed from the combinatorics of $S$ and the map $f$.
\end{theorem}

\begin{proof}
	Let $G$ be the 1--skeleton of $S$.
	We consider first the 4--handlebody obtained by attaching to $\emptyset$ a 4--dimensional 0--handle $H_v^0$ for each vertex $v$ of $G$, embedding $v$ as the core of $H_v^0$, attaching a 1--handle $H_e^1$ with orientation preserving attaching maps into $\pd H_u^0$ and $\pd H_v^0$ for each edge $e=(u,v)$ of $G$, embedding $e$ as the core of $H_e^1$ plus a pair of line segments to the cores $\pd H_u^0$ and $\pd H_v^0$.
	The result is a 4--dimensional handlebody called the \emph{4--thickening} of $G$, and is denoted by $H_4(G)$.
	
	Consider now $U_S(G)$, a closed regular neighbourhood of $G$ in $S$.
	This is equivalent to $S$ minus an open ball inside of each 2--cell (as in Theorem \ref{thm:stein2complex} when we considered $\sigma_U\setminus\sigma_V$), or can also be seen as $G$ plus an annulus attached by one of its boundary components over each cycle that a 2--cell was attached over in Theorem \ref{thm:stein2complex}.
	In either case, $U_S(G)$ collapses onto $G$ and the 4--thickening of $U_S(G)$ is homeomorphic to the 4--thickening of $G$.
	To build $W$, we make a 3--thickening of $U_S(G)$, and then a 4--thickening of the 3--handlebody obtained.
	This time, however, we pay attention to how the 2--cells of $S$ interact with the thickening.
	
	We built $S$ to have a 1--skeleton $G$ whose interior vertices are all of degree 4 and whose boundary vertices are all of degree 3.
	The 3--thickened regular neighbourhoods of the five possible vertex types and the three possible edge types in $S$ are depicted in Figure \ref{fig:3thickeningblocks}.
	We use these to build the 3--thickening $H_3(U_S(G))$ of $U_S(G)$ where $U_S(G)$ is embedded in $H_3(U_S(G))$ and intersects the boundary of $H_3(U_S(G))$ in the curves depicted on the blocks in Figure \ref{fig:3thickeningblocks}.
	Thinking of $H_3(U_S(G))$ as generically a bundle of $\II$ over $U_S(G)$, the curves would be the zero section of the bundle over the boundary of $U_S(G)$.
	Once we have $H_3(U_S(G))$, there is a unique orientable $\II$ bundle over $H_3(U_S(G))$, and this is the 4--thickening of $G$.
	This bundle can be obtained either by specifying local trivializations that reverse the orientation of the $\II$ factor along the curves in $H_3(U_S(G))$ along which the space becomes nonorientable, or by first building the 3--thickening of $T\subset G$, a maximal spanning tree of $G$, 4--thickening that space, and then attaching all remaining 1--handles in the unique orientation preserving way.
	We choose the second construction.
	
	\begin{figure}
		\centering
		\captionsetup{justification=centering}
		\caption{3--thickening blocks for the 1--skeleton of the Stein complex}
		\includegraphics[width=6in]{figures/3thickeningblocks.jpg}
		\label{fig:3thickeningblocks}
	\end{figure}
	
	Building $H_3(U_S(T))$ by adding an appropriate vertex block to $H_3(U_S(T))$ for each vertex of $T$, then connect them together with edge blocks in the unique way that is forced by the combinatorics of $S$ for each edge of $T$.
	Take the product of this space with $\II$.
	The result is a $\II$--bundle over $H_3(U_S(T))$ and generically a $\II^2$--bundle over $U_S(T)$.
	To extend this to $G$, we add 1--handles for each edge in $G$ that is not in $T$.
	Every such edge has at least one 2-handle in $S$ attached over it, and every 2--cell of $S$ attaches over at least one edge added in this step.
	We use the product of our edge blocks with $\II$ as the 4--disc structure for our 1--handles.
	The combinatorics of $S$ and the requirement that $H_4(U_S(G))$ is orientable make these handle attachments unique.
	Our 4--thickening $H_4(U_S(G))$ is once again a $\II$--bundle over $H_3(U_S(G))$ and generically a $\II^2$--bundle over $U_S(G)$.
	The boundary circles of $U_S(G)$, corresponding to 2--cells of $S$ and thus 2--handles of $W$, are now thickened to solid tori in $H_4(U_S(G))$.
	The last step to this construction is the attachment of 2--handles over these solid tori. 
	
	Let $v^*$ be a boundary circle of $U_S(G)$ corresponding to a 2--cell $c_v$ of $S$ with thickening $V^*$ in the boundary of $H_4(U_S(G))$.
	The first thing we must do is specify a canonical 0--framing on $V^*$, which we do by investigating the diagonal of the square fibers $\II$.
	As a subspace of $V^*$, the union of the fibers have the structure of an annulus or a M\"obius strip.
	To see which we get, we turn to the completion of $H_4(U_S(T))$ into $H_4(U_S(G))$ accomplished by attaching 4--dimensional 1--handles.
	At least one such 1--handle corresponded to an edge of $\pd c_v$, and $n$ of them were attached with an orientation reversal in both $\II$ factors.
	If $n$ is even then the diagonal is an annulus and we put the canonical 0--framing as the trivialization that takes one boundary component of that annulus to $S^1\times\{1\}$.
	If $n$ is odd then the diagonal is a M\"obius strip.
	In this case we take a curve that follows one half of the boundary component of the M\"obius strip (i.e. once around $V^*$ in the longitudinal direction along the boundary), then connects to itself via one half positive twist in the orientation of $V^*$ (which is canonically oriented by the canonical orientations of the double intervals $\II$).
	
	With a 0--framing specified, we just need framing coefficients.
	To recover those, we ask how our canonical framing sits inside of $M$.
	This question is well defined because the solid tori we are attaching 2--handles over are the $V^*$ we examined in the proof of Theorem \ref{thm:3bound4}, and the boundaries of these tori are contained in $M$.
	
	The complex $S$ embeds flatly into $W$, and the restriction of that embedding to the 0-- and 1--handles of $W$ is exactly how $U_S(G)$ embeds in $H_4(U_S(G))$.
	Specifically, the zero section of the torus $V^*$ above is the belt sphere of the 2--handle in $W$ corresponding to the 2--cell $c_v$ in $S$.
	This belt sphere is then the attaching sphere of the dual 2--handle in the handle decomposition of $W^*$ and the framing coefficient is then the number of meridinal twists from the 0--framing to the longitude in $V^*$ that is a meridian of $V$.
	Attaching a 2--handles over every such $V^*$'s yields a handle decomposition of a 4--manifold $W^*$ that is dual to the decomposition of $W$ acquired in Theorem \ref{thm:3bound4}.
	We conclude that $W^*$ is the desired cobordism of $(M,\emptyset)$.
\end{proof}

There are a couple of points left to address in this chapter.
The first is that of explicitly recovering the 0--framing curve used in the attachment of 2--handles in Theorem \ref{thm:3stein4}, a necessity for turning this process into an algorithm.
The second is an acknowledgment of the origin of the ideas in this Section.

The 0--framing $L$ is a curve in the shared boundary of $V$ and $V^*$ that is a number of meridinal twists of $V^*$ away a meridian of $V$.
This number is the framing coefficient we equip to the 2--cell of $S$ representing 2--handle attachment over $V^*$ in the construction of $W^*$.

Because $L$ is a longitude of $V^*$, it wraps exactly once around the meridinal direction of $V$, and can thus be realized as a section over $\pd \D$ where $f(V)=\D$.
Let $\D_0$ be the zero section of $V$ as a disc bundle over an interior regular fiber of $V$.
Then the oriented intersection number of $J$ with $D$ yields the framing coefficient.
We compute the framing coefficient for a 2--cell of $S$ in Section \ref{sub:gleams} using this method.


This work is based on that of Costantino and Thurston in \cite{CostThur08} and of Turaev in \cite{Turaev91}.
Theorem \ref{thm:3stein4} in particular is a version of the Turaev Reconstruction Theorem.
Three distinct versions can be found as Theorem 4.1 of \cite{Cost05}, 3.8 of \cite{CostThur08}, and 19.1 of \cite{Turaev91}.
The proof presented is closest in form to that found in \cite{Cost05}.
These selections offer a decent introduction to the theory of shadows of 4--manifolds.
A shadow is a 2--complex with extra structure, and the Stein complex found in this section is almost a shadow.